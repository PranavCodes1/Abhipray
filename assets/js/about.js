// ===== Language strings for about page =====
const aboutI18n = {
    en: {
        // Site meta
        "site.title": "About — Sawai Gandharva Festival",
        // Hero section
        "about.hero.title": "About Abhipray — Sawai Gandharva Festival",
        "about.hero.subtitle": "Preserving memories, experiences, and thoughts from the heart of Hindustani classical music.",
        // Purpose & Vision
        "about.purpose.title": "Main Purpose & Vision",
        "about.purpose.text": "Abhipray is an initiative to preserve the memories, experiences of audiences, and thoughts of artists from the Sawai Gandharva Music Festival. The festival has been organized in Pune for the past 70 years by the Arya Sangeet Prasarak Mandal. It began as a small program in memory of Bharat Ratna Swarabhashkar Pandit Bhimsen Joshi's guru and has now grown into an international celebration.<br><br>Through Abhipray, the experiences of audiences, memories of artists, and abhiprays in various languages are preserved. The purpose is not only to document memories but also to inspire future generations with a love and respect for Hindustani classical music.<br><br><strong>Vision:</strong><br>- Promote and spread Indian classical music to a wider audience.<br>- Make priceless festival experiences and memories accessible to future generations.<br>- Showcase cultural diversity through abhiprays in multiple languages.<br>- Document handwritten abhiprays and the unique styles of artists, preserving the traditional and cultural heritage of music.<br><br><strong>Jagdish Deshpande</strong>, the founder of this initiative, is a passionate music connoisseur. For over 20 years, he has been documenting the abhiprays and memories from the festival. Through this effort, the experiences of artists, thoughts of audiences, and multilingual abhiprays are being preserved.<br><br>The abhiprays are available in multiple languages — Marathi, Hindi, English, many regional languages of India, and some foreign languages such as French, German, and Italian. Handwritten abhiprays allow readers to experience the festival intimately.",
        // Acknowledgements
        "about.ack.title": "Acknowledgements",
        "about.ack.text": "Many friends and family members contributed to the success of this initiative. Special thanks to Sandhya Deshpande, Rohan Deshpande, Poonam Nagekar Deshpande, Amruta Deshpande, the late Chandrakant Joshi and his spouse, respected Shri Vikas Petkar and his family, Kedar Pingale, Nishikant Bhume, Yogesh Vaidya, Sapna Vaidya, Lakshmikant Tubaji, Satish Thipse, Anjali Thipse, and Amit Deshpande. Their support made the collection and preservation of abhiprays possible and successful.",
        // Media Recognition
        "about.media.title": "Media Recognition",
        "about.media.text": "<strong>Jagdish Deshpande's</strong> collection of handwritten abhiprays has received recognition from various newspapers and media outlets. His work and initiative have been highlighted in the media.",
        // Gallery
        "about.gallery.title": "Newspaper Cuttings",
        "about.gallery.note": "Click to enlarge the images"
    },
    hi: {
        // Site meta
        "site.title": "परिचय — सवाई गंधर्व महोत्सव",
        // Hero section
        "about.hero.title": "अभिप्राय के बारे में — सवाई गंधर्व महोत्सव",
        "about.hero.subtitle": "हिंदुस्तानी शास्त्रीय संगीत के हृदय से यादों, अनुभवों और विचारों का संरक्षण।",
        // Purpose & Vision
        "about.purpose.title": "मुख्य उद्देश्य और दृष्टिकोण",
        "about.purpose.text": "अभिप्राय एक पहल है जो सवाई गंधर्व संगीत समारोह से दर्शकों की यादों, अनुभवों और कलाकारों के विचारों को संरक्षित करने के लिए है। यह उत्सव पुणे में पिछले 70 वर्षों से आर्य संगीत प्रसारक मंडल द्वारा आयोजित किया जाता रहा है। यह भारत रत्न स्वराभाषकर पंडित भीमसेन जोशी के गुरु की स्मृति में एक छोटे कार्यक्रम के रूप में शुरू हुआ और अब यह एक अंतर्राष्ट्रीय उत्सव बन गया है।<br><br>अभिप्राय के माध्यम से, दर्शकों के अनुभव, कलाकारों की यादें, और विभिन्न भाषाओं में अभिप्राय संरक्षित किए जाते हैं। इसका उद्देश्य केवल यादों को दस्तावेजी रूप देना नहीं है बल्कि भावी पीढ़ियों को हिंदुस्तानी शास्त्रीय संगीत के प्रति प्रेम और सम्मान से प्रेरित करना भी है।<br><br><strong>दृष्टिकोण:</strong><br>- भारतीय शास्त्रीय संगीत को व्यापक दर्शकों तक बढ़ावा देना और फैलाना।<br>- अमूल्य उत्सव अनुभवों और यादों को भावी पीढ़ियों के लिए सुलभ बनाना।<br>- कई भाषाओं में अभिप्रायों के माध्यम से सांस्कृतिक विविधता को प्रदर्शित करना।<br>- हस्तलिखित अभिप्रायों और कलाकारों की अनूठी शैलियों का दस्तावेजीकरण, संगीत की पारंपरिक और सांस्कृतिक विरासत का संरक्षण।<br><br>जगदीश देशपांडे, इस पहल के संस्थापक, एक भावुक संगीत प्रेमी हैं। 20 से अधिक वर्षों से, वे उत्सव से अभिप्रायों और यादों का दस्तावेजीकरण कर रहे हैं। इस प्रयास के माध्यम से, कलाकारों के अनुभव, दर्शकों के विचार, और बहुभाषी अभिप्राय संरक्षित किए जा रहे हैं।<br><br>अभिप्राय कई भाषाओं में उपलब्ध हैं — मराठी, हिंदी, अंग्रेजी, भारत की कई क्षेत्रीय भाषाएं, और कुछ विदेशी भाषाएं जैसे फ्रेंच, जर्मन, और इतालवी। हस्तलिखित अभिप्राय पाठकों को उत्सव का अंतरंग अनुभव प्रदान करते हैं।",
        // Acknowledgements
        "about.ack.title": "आभार",
        "about.ack.text": "इस पहल की सफलता में कई मित्रों और परिवारजनों ने योगदान दिया। संध्या देशपांडे, रोहन देशपांडे, पूनम नागेकर देशपांडे, अमृता देशपांडे, स्वर्गीय चंद्रकांत जोशी और उनकी पत्नी, आदरणीय श्री विकास पेटकर और उनके परिवार, केदार पिंगले, निशिकांत भूमे, योगेश वैद्य, सपना वैद्य, लक्ष्मीकांत तुबाजी, सतीश थिप्से, अंजली थिप्से, और अमित देशपांडे का विशेष धन्यवाद। उनके समर्थन ने अभिप्रायों के संग्रह और संरक्षण को संभव और सफल बनाया।",
        // Media Recognition
        "about.media.title": "मीडिया मान्यता",
        "about.media.text": "जगदीश देशपांडे के हस्तलिखित अभिप्रायों के संग्रह को विभिन्न समाचारपत्रों और मीडिया संस्थानों से मान्यता मिली है। उनके काम और पहल को मीडिया में उजागर किया गया है।",
        // Gallery
        "about.gallery.title": "अखबारी कतरनें और हस्तलिखित अभिप्राय",
        "about.gallery.note": "छवियों को बड़ा करने के लिए क्लिक करें"
    },
    mr: {
        // Site meta
        "site.title": "विषयी — सवाई गंधर्व महोत्सव",
        // Hero section
        "about.hero.title": "अभिप्रायाविषयी — सवाई गंधर्व महोत्सव",
        "about.hero.subtitle": "हिंदुस्थानी शास्त्रीय संगीताच्या हृदयातून आठवणी, अनुभव आणि विचारांचे संरक्षण।",
        // Purpose & Vision
        "about.purpose.title": "मुख्य उद्देश्य आणि दृष्टिकोन",
        "about.purpose.text": "अभिप्राय हा एक उपक्रम आहे जो सवाई गंधर्व संगीत महोत्सवातील प्रेक्षकांच्या आठवणी, अनुभव आणि कलाकारांचे विचार जतन करण्यासाठी आहे. हा उत्सव पुण्यात गेल्या 70 वर्षांपासून आर्य संगीत प्रसारक मंडळाद्वारे आयोजित केला जात आहे. भारतरत्न स्वराभाषकर पंडित भीमसेन जोशी यांच्या गुरूंच्या स्मृतीत छोट्या कार्यक्रमाने सुरुवात झाली आणि आता तो आंतरराष्ट्रीय उत्सव बनला आहे.<br><br>अभिप्रायाच्या माध्यमातून, प्रेक्षकांचे अनुभव, कलाकारांच्या आठवणी, आणि विविध भाषांमधील अभिप्राय जतन केले जातात. याचा उद्देश केवळ आठवणींचे दस्तावेजीकरण करणे नसून भावी पिढ्यांना हिंदुस्थानी शास्त्रीय संगीताबद्दल प्रेम आणि आदर निर्माण करण्यासाठी प्रेरणा देणे आहे.<br><br><strong>दृष्टिकोन:</strong><br>- भारतीय शास्त्रीय संगीताचा व्यापक प्रेक्षकांमध्ये प्रसार आणि प्रचार करणे.<br>- अमूल्य उत्सवाचे अनुभव आणि आठवणी भावी पिढ्यांसाठी सुलभ करणे.<br>- अनेक भाषांमधील अभिप्रायांद्वारे सांस्कृतिक विविधता दर्शवणे.<br>- हस्तलिखित अभिप्राय आणि कलाकारांच्या अनन्य शैलींचे दस्तावेजीकरण, संगीताच्या पारंपरिक आणि सांस्कृतिक वारशाचे संरक्षण.<br><br>जगदीश देशपांडे, या उपक्रमाचे संस्थापक, एक उत्कट संगीतप्रेमी आहेत. 20 वर्षांहून अधिक काळ, ते उत्सवातील अभिप्राय आणि आठवणींचे दस्तावेजीकरण करत आहेत. या प्रयत्नातून, कलाकारांचे अनुभव, प्रेक्षकांचे विचार, आणि बहुभाषिक अभिप्राय जतन केले जात आहेत.<br><br>अभिप्राय अनेक भाषांमध्ये उपलब्ध आहेत — मराठी, हिंदी, इंग्रजी, भारतातील अनेक प्रादेशिक भाषा, आणि काही परदेशी भाषा जसे की फ्रेंच, जर्मन, आणि इटालियन. हस्तलिखित अभिप्राय वाचकांना उत्सवाचा जवळचा अनुभव देतात.",
        // Acknowledgements
        "about.ack.title": "आभार",
        "about.ack.text": "या उपक्रमाच्या यशात अनेक मित्र आणि कुटुंबीयांनी योगदान दिले. संध्या देशपांडे, रोहन देशपांडे, पूनम नागेकर देशपांडे, अमृता देशपांडे, स्वर्गीय चंद्रकांत जोशी आणि त्यांची पत्नी, आदरणीय श्री विकास पेटकर आणि त्यांचे कुटुंब, केदार पिंगळे, निशिकांत भूमे, योगेश वैद्य, सपना वैद्य, लक्ष्मीकांत तुबाजी, सतीश थिप्से, अंजली थिप्से, आणि अमित देशपांडे यांचे विशेष आभार. त्यांच्या पाठिंब्यामुळे अभिप्रायांचे संकलन आणि संरक्षण शक्य आणि यशस्वी झाले.",
        // Media Recognition
        "about.media.title": "मीडिया मान्यता",
        "about.media.text": "जगदीश देशपांडे यांच्या हस्तलिखित अभिप्रायांच्या संकलनाला विविध वृत्तपत्रे आणि माध्यमांकडून मान्यता मिळाली आहे. त्यांचे काम आणि उपक्रम मीडियामध्ये प्रकाशित झाले आहेत.",
        // Gallery
        "about.gallery.title": "वृत्तपत्र कात्रणे आणि हस्तलिखित अभिप्राय",
        "about.gallery.note": "प्रतिमा मोठ्या करण्यासाठी क्लिक करा"
    }
};

// ===== Merge about translations with main i18n =====
if (typeof i18n !== 'undefined') {
    // Main i18n exists, merge about page translations
    Object.keys(aboutI18n).forEach(lang => {
        if (i18n[lang]) {
            Object.assign(i18n[lang], aboutI18n[lang]);
        } else {
            i18n[lang] = aboutI18n[lang];
        }
    });
} else {
    // If main i18n doesn't exist, use about translations
    window.i18n = aboutI18n;
}

// ===== Image gallery modal functionality =====
function setupImageGallery() {
    // Create modal HTML if it doesn't exist
    if (!document.getElementById('imageModal')) {
        const modalHTML = `
            <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="imageModalLabel">Image View</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-center">
                            <img id="modalImage" class="img-fluid" alt="Enlarged view">
                        </div>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    // Add click event to gallery images
    $('.card img').on('click', function() {
        const imageSrc = $(this).attr('src');
        const imageAlt = $(this).attr('alt');
        
        $('#modalImage').attr('src', imageSrc).attr('alt', imageAlt);
        $('#imageModalLabel').text(imageAlt);
        
        const imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
        imageModal.show();
    });

    // Add cursor pointer to indicate clickable images
    $('.card img').css('cursor', 'pointer');
}

// ===== Hero section animations =====
function setupHeroAnimations() {
    // Fade in hero texts (similar to homepage)
    $(".hero-title").fadeTo(800, 1);
    $(".hero-sub").delay(200).fadeTo(800, 1);
}

// ===== Smooth scrolling for anchor links =====
function setupSmoothScrolling() {
    $('a[href^="#"]').on('click', function(e) {
        e.preventDefault();
        
        const target = $(this.getAttribute('href'));
        if (target.length) {
            $('html, body').animate({
                scrollTop: target.offset().top - 100 // Account for fixed navbar
            }, 600);
        }
    });
}

// ===== Reading time estimator =====
function calculateReadingTime() {
    const content = $('.container').text();
    const wordCount = content.trim().split(/\s+/).length;
    const readingSpeed = 200; // words per minute
    const readingTime = Math.ceil(wordCount / readingSpeed);
    
    // Add reading time indicator if desired
    if (readingTime > 1) {
        const readingTimeHTML = `
            <div class="alert alert-info text-center mb-4">
                <small><i class="bi bi-clock"></i> Estimated reading time: ${readingTime} minutes</small>
            </div>
        `;
        $('.container').first().prepend(readingTimeHTML);
    }
}

// ===== Text enhancement for better readability =====
function enhanceTextReadability() {
    // Add line breaks in long paragraphs for better readability
    $('p[data-i18n="about.purpose.text"]').each(function() {
        const text = $(this).html();
        // Already has <br><br> tags, so formatting is preserved
        $(this).addClass('text-justify'); // Add justified text for better appearance
    });
}

// ===== Initialize on page load =====
$(function() {
    // Apply current language immediately
    setTimeout(function() {
        const currentLang = localStorage.getItem("abhipray_lang") || "en";
        
        // Trigger language application if switchLanguage exists
        if (typeof switchLanguage === 'function') {
            switchLanguage(currentLang);
        }
    }, 100);

    // Setup page functionality
    setupHeroAnimations();
    setupImageGallery();
    setupSmoothScrolling();
    enhanceTextReadability();
    
    // Optional: Add reading time (uncomment if needed)
    // calculateReadingTime();
    
    // Add fade-in animation to sections
    $('.card, section').css('opacity', '0').animate({opacity: 1}, 600);
    
    // Add hover effects to gallery cards
    $('.card').hover(
        function() {
            $(this).addClass('shadow-lg').css('transform', 'translateY(-2px)');
        },
        function() {
            $(this).removeClass('shadow-lg').css('transform', 'translateY(0px)');
        }
    );
});

// ===== Scroll-triggered animations =====
$(window).scroll(function() {
    const scrollTop = $(this).scrollTop();
    const windowHeight = $(this).height();
    
    // Parallax effect for hero section (subtle)
    $('.hero').css('transform', `translateY(${scrollTop * 0.1}px)`);
    
    // Fade in sections as they come into view
    $('section').each(function() {
        const sectionTop = $(this).offset().top;
        const sectionHeight = $(this).outerHeight();
        
        if (scrollTop + windowHeight > sectionTop + 100) {
            $(this).addClass('animate-fadeIn');
        }
    });
});

// ===== Add CSS animations =====
const additionalCSS = `
.animate-fadeIn {
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.card {
    transition: all 0.3s ease;
}

.card img {
    transition: transform 0.3s ease;
}

.card:hover img {
    transform: scale(1.02);
}

.text-justify {
    text-align: justify;
    line-height: 1.7;
}

.hero {
    transition: transform 0.1s ease-out;
}
`;

// Add the CSS to document head if not already present
if (!document.getElementById('about-page-styles')) {
    const style = document.createElement('style');
    style.id = 'about-page-styles';
    style.textContent = additionalCSS;
    document.head.appendChild(style);
}
