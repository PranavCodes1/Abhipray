// ===== Language strings for copyright page =====
const copyrightI18n = {
    en: {
        // Site meta
        "site.title": "Copyright — Sawai Gandharva Festival",
        // Footer link
        "footer.copyright.link": "Copyright & Rights",
        // Copyright page
        "copyright.heading": "Copyright & Rights Notice",
        "copyright.subheading": "Protecting the intellectual property of abhipray contributors",
        "copyright.notice.title": "Copyright & Rights Notice",
        "copyright.notice.warning": "⚠️ Important Notice",
        "copyright.notice.text": "All abhiprays on this website are copyrighted (©). Unauthorized reproduction, redistribution, or claiming them as your own collection is strictly prohibited.",
        "copyright.usage.title": "Usage Guidelines",
        "copyright.usage.allowed.title": "✅ Allowed",
        "copyright.usage.allowed.read": "You may read and share abhiprays for personal use only.",
        "copyright.usage.prohibited.title": "❌ Prohibited",
        "copyright.usage.prohibited.reuse": "Reusing or reposting abhiprays as your own collection is forbidden.",
        "copyright.usage.prohibited.images": "Images of handwritten abhiprays are protected and must not be copied or altered without consent.",
        "copyright.contact.title": "Contact for Rights Issues",
        "copyright.contact.text": "If you have questions about copyright or wish to request permission for specific use, please contact us:",
        "copyright.contact.email": "Email:",
        "copyright.contact.response": "Response Time:",
        "copyright.contact.response.time": "48-72 hours"
    },
    hi: {
        // Site meta
        "site.title": "कॉपीराइट — सवाई गंधर्व महोत्सव",
        // Footer link
        "footer.copyright.link": "कॉपीराइट और अधिकार",
        // Copyright page
        "copyright.heading": "कॉपीराइट और अधिकार सूचना",
        "copyright.subheading": "अभिप्राय योगदानकर्ताओं की बौद्धिक संपदा की सुरक्षा",
        "copyright.notice.title": "कॉपीराइट और अधिकार सूचना",
        "copyright.notice.warning": "⚠️ महत्वपूर्ण सूचना",
        "copyright.notice.text": "इस वेबसाइट पर सभी अभिप्राय कॉपीराइट (©) हैं। अनधिकृत पुनरुत्पादन, पुनर्वितरण, या उन्हें अपने संग्रह के रूप में दावा करना सख्त वर्जित है।",
        "copyright.usage.title": "उपयोग दिशानिर्देश",
        "copyright.usage.allowed.title": "✅ अनुमतित",
        "copyright.usage.allowed.read": "आप केवल व्यक्तिगत उपयोग के लिए अभिप्राय पढ़ और साझा कर सकते हैं।",
        "copyright.usage.prohibited.title": "❌ निषिद्ध",
        "copyright.usage.prohibited.reuse": "अभिप्रायों को अपने संग्रह के रूप में पुन: उपयोग या पुनः पोस्ट करना मना है।",
        "copyright.usage.prohibited.images": "हस्तलिखित अभिप्रायों की छवियां संरक्षित हैं और सहमति के बिना कॉपी या बदली नहीं जा सकतीं।",
        "copyright.contact.title": "अधिकार मुद्दों के लिए संपर्क",
        "copyright.contact.text": "यदि आपके पास कॉपीराइट के बारे में प्रश्न हैं या विशिष्ट उपयोग की अनुमति का अनुरोध करना चाहते हैं, तो कृपया हमसे संपर्क करें:",
        "copyright.contact.email": "ईमेल:",
        "copyright.contact.response": "प्रतिक्रिया समय:",
        "copyright.contact.response.time": "48-72 घंटे"
    },
    mr: {
        // Site meta
        "site.title": "कॉपीराइट — सवाई गंधर्व महोत्सव",
        // Footer link
        "footer.copyright.link": "कॉपीराइट आणि हक्क",
        // Copyright page
        "copyright.heading": "कॉपीराइट आणि हक्क सूचना",
        "copyright.subheading": "अभिप्राय योगदानकर्त्यांच्या बौद्धिक मालमत्तेचे संरक्षण",
        "copyright.notice.title": "कॉपीराइट आणि हक्क सूचना",
        "copyright.notice.warning": "⚠️ महत्वाची सूचना",
        "copyright.notice.text": "या वेबसाइटवरील सर्व अभिप्राय कॉपीराइट (©) आहेत. अनधिकृत पुनरुत्पादन, पुनर्वितरण किंवा त्यांना स्वतःचे संकलन म्हणून दावा करणे सक्त प्रतिबंधित आहे.",
        "copyright.usage.title": "वापर मार्गदर्शक तत्त्वे",
        "copyright.usage.allowed.title": "✅ परवानगी",
        "copyright.usage.allowed.read": "तुम्ही केवळ वैयक्तिक वापरासाठी अभिप्राय वाचू आणि शेअर करू शकता.",
        "copyright.usage.prohibited.title": "❌ प्रतिबंधित",
        "copyright.usage.prohibited.reuse": "अभिप्रायांचा स्वतःचे संकलन म्हणून पुनर्वापर किंवा पुन्हा पोस्ट करणे मना आहे.",
        "copyright.usage.prohibited.images": "हस्तलिखित अभिप्रायांच्या प्रतिमा संरक्षित आहेत आणि संमतीशिवाय कॉपी किंवा बदलल्या जाऊ शकत नाहीत.",
        "copyright.contact.title": "हक्क समस्यांसाठी संपर्क",
        "copyright.contact.text": "तुमच्याकडे कॉपीराइटबद्दल प्रश्न असल्यास किंवा विशिष्ट वापरासाठी परवानगीची विनंती करायची असल्यास, कृपया आमच्याशी संपर्क साधा:",
        "copyright.contact.email": "ईमेल:",
        "copyright.contact.response": "प्रतिसाद वेळ:",
        "copyright.contact.response.time": "48-72 तास"
    }
};

// ===== Merge copyright translations with main i18n =====
if (typeof i18n !== 'undefined') {
    // Main i18n exists, merge copyright page translations
    Object.keys(copyrightI18n).forEach(lang => {
        if (i18n[lang]) {
            Object.assign(i18n[lang], copyrightI18n[lang]);
        } else {
            i18n[lang] = copyrightI18n[lang];
        }
    });
} else {
    // If main i18n doesn't exist, use copyright translations
    window.i18n = copyrightI18n;
}

// ===== Page-specific functionality =====
function setupCopyrightPage() {
    // Add copy protection (right-click disabled on important content)
    $('.alert, .card-body').on('contextmenu', function(e) {
        e.preventDefault();
        showCopyrightWarning();
        return false;
    });

    // Add text selection protection for copyright content
    $('.alert, .card-body').on('selectstart', function(e) {
        if ($(e.target).closest('.alert').length > 0) {
            e.preventDefault();
            return false;
        }
    });

    // Add visual emphasis to warning sections
    $('.alert-warning').addClass('border-left-warning');
    
    // Add hover effects to prohibited items
    $('.text-danger').parent().hover(
        function() {
            $(this).addClass('bg-light-danger').css('transition', 'all 0.3s ease');
        },
        function() {
            $(this).removeClass('bg-light-danger');
        }
    );
}

// ===== Show copyright warning =====
function showCopyrightWarning() {
    // Create a temporary warning message
    const warning = $('<div class="position-fixed top-50 start-50 translate-middle bg-danger text-white p-3 rounded shadow-lg" style="z-index: 9999;">Content is protected by copyright!</div>');
    $('body').append(warning);
    
    // Remove warning after 2 seconds
    setTimeout(() => {
        warning.fadeOut(300, function() {
            $(this).remove();
        });
    }, 2000);
}

// ===== Add footer link to all pages =====
function addCopyrightLinkToFooter() {
    // Check if footer exists and doesn't already have copyright link
    const footer = $('footer .container');
    if (footer.length > 0 && !footer.find('a[href="copyright.html"]').length) {
        const currentLang = localStorage.getItem("abhipray_lang") || "en";
        const linkText = i18n[currentLang]?.["footer.copyright.link"] || "Copyright & Rights";
        
        const copyrightLink = `
            <div class="mt-2">
                <a href="copyright.html" class="text-light text-decoration-none" data-i18n="footer.copyright.link">${linkText}</a>
            </div>
        `;
        footer.append(copyrightLink);
    }
}

// ===== Initialize on page load =====
$(function() {
    // Apply current language immediately
    setTimeout(function() {
        const currentLang = localStorage.getItem("abhipray_lang") || "en";
        
        // Trigger language application if switchLanguage exists
        if (typeof switchLanguage === 'function') {
            switchLanguage(currentLang);
        }
    }, 100);

    // Setup page-specific functionality
    setupCopyrightPage();
    
    // Add copyright link to footer on all pages
    addCopyrightLinkToFooter();
    
    // Add fade-in animation to sections
    $('.card').css('opacity', '0').animate({opacity: 1}, 600);
    
    // Add warning border styling
    $('.border-left-warning').css({
        'border-left': '4px solid #ffc107',
        'background-color': '#fff3cd'
    });
});

// ===== Additional CSS for copyright page =====
const copyrightCSS = `
.border-left-warning {
    border-left: 4px solid #ffc107 !important;
    background-color: #fff3cd !important;
}

.bg-light-danger {
    background-color: #f8d7da !important;
    border-radius: 4px;
    padding: 4px;
}

.copyright-protected {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.card {
    transition: all 0.3s ease;
}

.alert-warning {
    box-shadow: 0 2px 4px rgba(255, 193, 7, 0.2);
}
`;

// Add the CSS to document head if not already present
if (!document.getElementById('copyright-page-styles')) {
    const style = document.createElement('style');
    style.id = 'copyright-page-styles';
    style.textContent = copyrightCSS;
    document.head.appendChild(style);
}
